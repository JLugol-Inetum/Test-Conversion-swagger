{"openapi":"3.0.1","info":{"title":"Encryption as a Service","description":"Data encryption and decryption","version":"1.0.0"},"servers":[{"url":"https://eaas.api.hbx.geo.infra.ftgroup"}],"tags":[{"name":"PersonalKey","description":"Encrypt with a personal key derived from JWT client_id"}],"paths":{"/v1/my/{context}/encrypt":{"post":{"tags":["PersonalKey"],"summary":"Encrypt bytes with client key","operationId":"encryptMy","parameters":[{"in":"path","name":"context","schema":{"type":"string"},"required":true,"description":"Application specific context for this datatype"}],"requestBody":{"description":"File to encrypt","content":{"application/octet-stream":{"schema":{"type":"string","format":"binary"}}}},"responses":{"200":{"description":"Successfully encrypted data","content":{"text/plain":{"schema":{"type":"string"}}}},"401":{"description":"Invalid token"},"403":{"description":"Insuffisant scope"}},"security":[{"okapi":["api-eaas-v1-prd:encrypt"]}]}},"/v1/my/{context}/encrypt/batch":{"post":{"tags":["PersonalKey"],"summary":"Encrypt multiple string with client key","operationId":"encryptMyBatch","parameters":[{"in":"path","name":"context","schema":{"type":"string"},"required":true,"description":"Application specific context for this datatype"}],"requestBody":{"description":"Strings to encrypt","content":{"application/json":{"schema":{"type":"array","items":{"type":"string"}}}}},"responses":{"200":{"description":"Successfully encrypted strings","content":{"application/json":{"schema":{"type":"array","items":{"type":"string"}}}}},"401":{"description":"Invalid token"},"403":{"description":"Insuffisant scope"}},"security":[{"okapi":["api-eaas-v1-prd:encrypt"]}]}},"/v1/my/{context}/decrypt":{"post":{"tags":["PersonalKey"],"summary":"Decrypt bytes with client key","operationId":"decryptMy","parameters":[{"in":"path","name":"context","schema":{"type":"string"},"required":true,"description":"Application specific context for this datatype"}],"requestBody":{"description":"Cipher to decrypt","content":{"text/plain":{"schema":{"type":"string"}}}},"responses":{"200":{"description":"Successfully decrypted data","content":{"application/octet-stream":{"schema":{"type":"string","format":"binary"}}}},"401":{"description":"Invalid token"},"403":{"description":"Insuffisant scope"}},"security":[{"okapi":["api-eaas-v1-prd:decrypt"]}]}},"/v1/my/{context}/decrypt/batch":{"post":{"tags":["PersonalKey"],"summary":"Decrypt multiple string with client key","operationId":"decryptMyBatch","parameters":[{"in":"path","name":"context","schema":{"type":"string"},"required":true,"description":"Application specific context for this datatype"}],"requestBody":{"description":"Strings to decrypt","content":{"application/json":{"schema":{"type":"array","items":{"type":"string"}}}}},"responses":{"200":{"description":"Successfully decrypted strings","content":{"application/json":{"schema":{"type":"array","items":{"type":"string"}}}}},"401":{"description":"Invalid token"},"403":{"description":"Insuffisant scope"}},"security":[{"okapi":["api-eaas-v1-prd:decrypt"]}]}},"/v1/my/{context}/rewrap":{"post":{"tags":["PersonalKey"],"summary":"Update cipher to use last version of the client key","description":"Only usefull if /version/my is greater than your cipher 'vault:v?:...'.\nThis operation can be given to third party. Send and recieve encrypted data.\n","operationId":"rewrapMy","parameters":[{"in":"path","name":"context","schema":{"type":"string"},"required":true,"description":"Application specific context for this datatype"}],"requestBody":{"description":"Cipher to rewrap","content":{"text/plain":{"schema":{"type":"string"}}}},"responses":{"200":{"description":"Successfully updated cipher version","content":{"text/plain":{"schema":{"type":"string"}}}},"401":{"description":"Invalid token"},"403":{"description":"Insuffisant scope"}},"security":[{"okapi":["api-eaas-v1-prd:rewrap"]}]}},"/v1/my/{context}/rewrap/batch":{"post":{"tags":["PersonalKey"],"summary":"Update multiple ciphers to use last version of the client key","operationId":"rewrapMyBatch","parameters":[{"in":"path","name":"context","schema":{"type":"string"},"required":true,"description":"Application specific context for this datatype"}],"requestBody":{"description":"Ciphers to rewrap","content":{"application/json":{"schema":{"type":"array","items":{"type":"string"}}}}},"responses":{"200":{"description":"Successfully updated ciphers version","content":{"application/json":{"schema":{"type":"array","items":{"type":"string"}}}}},"401":{"description":"Invalid token"},"403":{"description":"Insuffisant scope"}},"security":[{"okapi":["api-eaas-v1-prd:rewrap"]}]}},"/v1/my/version":{"get":{"tags":["PersonalKey"],"summary":"Get last version of the client key","description":"Indicated if /rewrap/my is needed","operationId":"versionMy","responses":{"200":{"description":"Successful request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/KeyVersions"}}}},"401":{"description":"Invalid token"},"403":{"description":"Insuffisant scope"}},"security":[{"okapi":["api-eaas-v1-prd:rewrap"]}]}}},"security":[{"okapi":[]}],"components":{"schemas":{"KeyVersions":{"type":"object","properties":{"min":{"type":"integer","description":"Last usable version for decryption"},"max":{"type":"integer","description":"Version used for encrypt and rewrap"}},"required":["min","max"]}},"securitySchemes":{"okapi":{"type":"oauth2","flows":{"clientCredentials":{"tokenUrl":"https://okapi-v2.api.hbx.geo.infra.ftgroup/v2/token","scopes":{"api-eaas-v1-prd:encrypt":"encrypt my files","api-eaas-v1-prd:decrypt":"decrypt my files","api-eaas-v1-prd:rewrap":"update my files cipher"}}}}}}}
